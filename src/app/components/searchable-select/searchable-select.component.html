<div class="custom-select-wrapper">
  <label class="custom-select-label">{{ label }}</label>
  <div class="custom-select" [class.open]="isOpen" [class.has-value]="selectedValue !== null && selectedValue !== undefined && selectedValue !== ''">
    <div class="select-trigger" (click)="toggleDropdown()">
      <span class="select-value">{{ getDisplayLabel() || placeholder }}</span>
      <div class="select-icons">
        <button
          *ngIf="selectedValue !== null && selectedValue !== undefined && selectedValue !== ''"
          class="clear-icon"
          (click)="onClear($event)"
          type="button">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
        <svg class="dropdown-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>

    <div class="select-dropdown" *ngIf="isOpen">
      <div class="search-box">
        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="1.5"/>
          <path d="M13.5 13.5L17 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input
          type="text"
          class="search-input"
          [placeholder]="placeholder"
          [(ngModel)]="searchText"
          (input)="onSearchChange($event)"
          (click)="$event.stopPropagation()"
        />
      </div>

      <div class="options-list">
        <div
          *ngFor="let option of filteredOptions"
          class="option-item"
          [class.selected]="option.value === selectedValue"
          (click)="selectOption(option.value)">
          {{ option.label }}
        </div>

        <div *ngIf="filteredOptions.length === 0" class="option-item disabled">
          Ничего не найдено
        </div>
      </div>
    </div>
  </div>
</div>
