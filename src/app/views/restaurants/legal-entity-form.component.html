<div class="page-container">
  <div class="page-header">
    <div class="header-left">
      <button class="btn-back" (click)="cancel()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <h1 class="page-title">
        {{ isEditMode ? 'Редактировать юридическое лицо' : 'Создать юридическое лицо' }}
      </h1>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="saveDraft()" [disabled]="isSaving">
        Сохранить как черновик
      </button>
      <button class="btn-primary" (click)="saveEntity()" [disabled]="isSaving">
        {{ isEditMode ? 'Сохранить' : 'Создать' }}
      </button>
    </div>
  </div>

  <div class="page-content">
    <div class="form-card">
      <h2 class="section-title">Основная информация</h2>

      <h3 class="subsection-title">Общие сведения</h3>

      <div class="form-group">
        <label class="form-label">Название*</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="form.name"
          placeholder="Введите название"
          required>
      </div>

      <div class="form-group">
        <label class="form-label">Юридическое название</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="form.legal_name"
          placeholder="Введите юридическое название">
      </div>

      <h3 class="subsection-title">Реквизиты</h3>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">ИНН</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.inn"
            placeholder="Введите ИНН"
            maxlength="12">
        </div>

        <div class="form-group">
          <label class="form-label">КПП</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.kpp"
            placeholder="Введите КПП"
            maxlength="9">
        </div>

        <div class="form-group">
          <label class="form-label">ОГРН</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.ogrn"
            placeholder="Введите ОГРН"
            maxlength="13">
        </div>
      </div>

      <h3 class="subsection-title">Юридический адрес</h3>

      <div class="form-group">
        <label class="form-label">Название улицы и дом*</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="form.legal_address_street"
          placeholder="Например: ул. Ленина, д. 10, кв. 5"
          required>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Город/населенный пункт*</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.legal_address_city"
            placeholder="Введите город"
            required>
        </div>

        <div class="form-group">
          <label class="form-label">Область/регион*</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.legal_address_region"
            placeholder="Введите регион"
            required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Страна*</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.legal_address_country"
            placeholder="Введите страну"
            required>
        </div>

        <div class="form-group">
          <label class="form-label">Почтовый код</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.legal_address_postal_code"
            placeholder="Введите почтовый код">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Комментарии к адресу</label>
        <textarea
          class="form-textarea"
          [(ngModel)]="form.legal_address_comment"
          rows="2"
          placeholder="Дополнительная информация об адресе"></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Широта</label>
          <input
            type="number"
            class="form-input"
            [(ngModel)]="form.legal_address_latitude"
            placeholder="55.751244"
            step="0.000001">
        </div>

        <div class="form-group">
          <label class="form-label">Долгота</label>
          <input
            type="number"
            class="form-input"
            [(ngModel)]="form.legal_address_longitude"
            placeholder="37.618423"
            step="0.000001">
        </div>
      </div>

      <h3 class="subsection-title">Фактический адрес</h3>

      <div class="form-group">
        <label class="form-label">Название улицы и дом*</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="form.actual_address_street"
          placeholder="Например: ул. Ленина, д. 10, кв. 5"
          required>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Город/населенный пункт*</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.actual_address_city"
            placeholder="Введите город"
            required>
        </div>

        <div class="form-group">
          <label class="form-label">Область/регион*</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.actual_address_region"
            placeholder="Введите регион"
            required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Страна*</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.actual_address_country"
            placeholder="Введите страну"
            required>
        </div>

        <div class="form-group">
          <label class="form-label">Почтовый код</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.actual_address_postal_code"
            placeholder="Введите почтовый код">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Комментарии к адресу</label>
        <textarea
          class="form-textarea"
          [(ngModel)]="form.actual_address_comment"
          rows="2"
          placeholder="Дополнительная информация об адресе"></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Широта</label>
          <input
            type="number"
            class="form-input"
            [(ngModel)]="form.actual_address_latitude"
            placeholder="55.751244"
            step="0.000001">
        </div>

        <div class="form-group">
          <label class="form-label">Долгота</label>
          <input
            type="number"
            class="form-input"
            [(ngModel)]="form.actual_address_longitude"
            placeholder="37.618423"
            step="0.000001">
        </div>
      </div>

      <h3 class="subsection-title">Контактная информация</h3>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Телефон организации</label>
          <input
            type="tel"
            class="form-input"
            placeholder="+7 (___) ___-__-__">
        </div>

        <div class="form-group">
          <label class="form-label">Email организации</label>
          <input
            type="email"
            class="form-input"
            placeholder="example@company.ru">
        </div>
      </div>

      <h3 class="subsection-title">Должностные лица</h3>

      <div class="form-group">
        <app-searchable-select
          [label]="'Директор'"
          [options]="employeeOptions"
          [placeholder]="'Поиск...'"
          [(ngModel)]="form.director_id"
          (ngModelChange)="onDirectorSelect($event)"
          name="director">
        </app-searchable-select>
      </div>

      <div class="form-group">
        <app-searchable-select
          [label]="'Главный бухгалтер'"
          [options]="employeeOptions"
          [placeholder]="'Поиск...'"
          [(ngModel)]="form.accountant_id"
          (ngModelChange)="onAccountantSelect($event)"
          name="accountant">
        </app-searchable-select>
      </div>

      <h3 class="subsection-title">Банковские реквизиты</h3>

      <div class="form-group">
        <label class="form-label">Название банка</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="form.bank_name"
          placeholder="Введите название банка">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">БИК</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.bik"
            placeholder="Введите БИК"
            maxlength="9">
        </div>

        <div class="form-group">
          <label class="form-label">Корреспондентский счет</label>
          <input
            type="text"
            class="form-input"
            [(ngModel)]="form.correspondent_account"
            placeholder="Введите корр. счет"
            maxlength="20">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Расчетный счет</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="form.payment_account"
          placeholder="Введите расчетный счет"
          maxlength="20">
      </div>
    </div>
  </div>
</div>

<app-employee-sidebar
  [(isOpen)]="isEmployeeSidebarOpen"
  (employeeCreated)="onEmployeeCreated($event)">
</app-employee-sidebar>
